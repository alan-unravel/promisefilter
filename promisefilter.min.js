!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.promisefilter=e()}}(function(){var define,module,exports;return function e(r,n,i){function t(u,s){if(!n[u]){if(!r[u]){var l="function"==typeof require&&require;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var a=n[u]={exports:{}};r[u][0].call(a.exports,function(e){var n=r[u][1][e];return t(n?n:e)},a,a.exports,e,r,n,i)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)t(i[u]);return t}({1:[function(require,module,exports){(function(global){var operative="undefined"!=typeof window?window.operative:"undefined"!=typeof global?global.operative:null,cfUrl="/base/node_modules/crossfilter2/crossfilter.js",opfilter=operative({unpack:function unpackFunction(func,context){var internal,evalStr="";return context&&(evalStr+=context),evalStr+="internal = "+func,eval(evalStr),internal},crossfilters:{},crossfilterIndex:0,dimensions:{},dimensionIndex:0,groupAlls:{},groupAllIndex:0,dimensionGroupAlls:{},dimensionGroupAllIndex:0,dimensionGroups:{},dimensionGroupIndex:0,"new":function(e){e?this.crossfilters[this.crossfilterIndex]=crossfilter(e):this.crossfilters[this.crossfilterIndex]=crossfilter([]);var r=this.crossfilterIndex;this.crossfilterIndex++,this.deferred().fulfill(r)},dimension:function(e,r){var n=this.deferred();try{this.dimensions[this.dimensionIndex]=this.crossfilters[e].dimension(this.unpack(r));var i=this.dimensionIndex;this.dimensionIndex++,n.fulfill(i)}catch(t){n.reject(t.message)}},"dimension.dispose":function(e){var r=this.deferred();try{this.dimensions[e].dispose(),r.fulfill()}catch(n){r.reject(n.message)}},"dimension.groupAll":function(e){var r=this.deferred();try{this.dimensionGroupAlls[this.dimensionGroupAllIndex]=this.dimensions[e].groupAll();var n=this.dimensionGroupAllIndex;this.dimensionGroupAllIndex++,r.fulfill(n)}catch(i){r.reject(i.message)}},"dimension.groupAll.value":function(e){var r=this.deferred();try{var n=this.dimensionGroupAlls[e].value();r.fulfill(n)}catch(i){r.reject(i.message)}},"dimension.groupAll.reduceSum":function(e,r){var n=this.deferred();try{this.dimensionGroupAlls[e].reduceSum(this.unpack(r)),n.fulfill()}catch(i){n.reject(i.message)}},"dimension.groupAll.reduceCount":function(e){var r=this.deferred();try{this.dimensionGroupAlls[e].reduceCount(),r.fulfill()}catch(n){r.reject(n.message)}},"dimension.groupAll.reduce":function(e,r,n,i){var t=this.deferred();try{this.dimensionGroupAlls[e].reduce(this.unpack(r),this.unpack(n),this.unpack(i)),t.fulfill()}catch(o){t.reject(o.message)}},"dimension.groupAll.dispose":function(e){var r=this.deferred();try{this.dimensionGroupAlls[e].dispose(),r.fulfill()}catch(n){r.reject(n.message)}},"dimension.filterRange":function(e,r){var n=this.deferred();try{this.dimensions[e].filterRange(r),n.fulfill()}catch(i){n.reject(i.message)}},"dimension.filterExact":function(e,r){var n=this.deferred();try{this.dimensions[e].filterExact(r),n.fulfill()}catch(i){n.reject(i.message)}},"dimension.filterFunction":function(e,r){var n=this.deferred();try{this.dimensions[e].filterFunction(this.unpack(r)),n.fulfill()}catch(i){n.reject(i.message)}},"dimension.filterAll":function(e){var r=this.deferred();try{this.dimensions[e].filterAll(),r.fulfill()}catch(n){r.reject(n.message)}},"dimension.filter":function(e,r){var n=this.deferred();try{this.dimensions[e].filter(r),n.fulfill()}catch(i){n.reject(i.message)}},"dimension.top":function(e,r){var n=this.deferred();try{var i=this.dimensions[e].top(r);n.fulfill(i)}catch(t){n.reject(t.message)}},"dimension.bottom":function(e,r){var n=this.deferred();try{var i=this.dimensions[e].bottom(r);n.fulfill(i)}catch(t){n.reject(t.message)}},"dimension.group":function(e,r){var n=this.deferred();try{this.dimensionGroups[this.dimensionGroupIndex]=this.dimensions[e].group(this.unpack(r));var i=this.dimensionGroupIndex;this.dimensionGroupIndex++,n.fulfill(i)}catch(t){n.reject(t.message)}},"dimension.group.top":function(e,r){var n=this.deferred();try{var i=this.dimensionGroups[e].top(r);n.fulfill(i)}catch(t){n.reject(t.message)}},"dimension.group.all":function(e){var r=this.deferred();try{var n=this.dimensionGroups[e].all();r.fulfill(n)}catch(i){r.reject(i.message)}},"dimension.group.size":function(e){var r=this.deferred();try{var n=this.dimensionGroups[e].size();r.fulfill(n)}catch(i){r.reject(i.message)}},"dimension.group.reduce":function(e,r,n,i){var t=this.deferred();try{this.dimensionGroups[e].reduce(this.unpack(r),this.unpack(n),this.unpack(i)),t.fulfill()}catch(o){t.reject(o.message)}},"dimension.group.order":function(e,r){var n=this.deferred();try{this.dimensionGroups[e].order(this.unpack(r)),problem.fulfill()}catch(i){n.reject(i.message)}},"dimension.group.orderNatural":function(e){var r=this.deferred();try{this.dimensionGroups[e].orderNatural(),r.fulfill()}catch(n){r.reject(n.message)}},"dimension.group.reduceSum":function(e,r){var n=this.deferred();try{this.dimensionGroups[e].reduceSum(this.unpack(r)),n.fulfill()}catch(i){n.reject()}},"dimension.group.reduceCount":function(e){var r=this.deferred();try{this.dimensionGroups[e].reduceCount(),r.fulfill()}catch(n){r.reject(n.message)}},"dimension.group.dispose":function(e){var r=this.deferred();try{this.dimensionGroups[e].dispose(),r.fulfill()}catch(n){r.reject(n.message)}},groupAll:function(e){var r=this.deferred();try{this.groupAlls[this.groupAllIndex]=this.crossfilters[e].groupAll();var n=this.groupAllIndex;this.groupAllIndex++,r.fulfill(n)}catch(i){r.reject(i.message)}},"groupAll.value":function(e){var r=this.deferred();try{var n=this.groupAlls[e].value();r.fulfill(n)}catch(i){r.reject(i.message)}},"groupAll.reduceSum":function(e,r){var n=this.deferred();try{this.groupAlls[e].reduceSum(this.unpack(r)),n.fulfill()}catch(i){n.reject(i.message)}},"groupAll.reduceCount":function(e){var r=this.deferred();try{this.groupAlls[e].reduceCount(),r.fulfill()}catch(n){r.reject(n.message)}},"groupAll.reduce":function(e,r,n,i){var t=this.deferred();try{this.groupAlls[e].reduce(this.unpack(r),this.unpack(n),this.unpack(i)),t.fulfill()}catch(o){t.reject(o.message)}},"groupAll.dispose":function(e){var r=this.deferred();try{this.groupAlls[e].dispose(),r.fulfill()}catch(n){r.reject(n.message)}},add:function(e,r){var n=this.deferred();try{this.crossfilters[e].add(r),n.fulfill()}catch(i){n.reject(i.message)}},size:function(e){var r=this.deferred();try{var n=this.crossfilters[e].size();r.fulfill(n)}catch(i){r.reject(i.message)}},all:function(e){var r=this.deferred();try{var n=this.crossfilters[e].all();r.fulfill(n)}catch(i){r.reject(i.message)}},remove:function(e){var r=this.deferred();try{this.crossfilters[e].remove(),r.fulfill()}catch(n){r.reject(n.message)}}},[cfUrl]),readSynchronizer=Promise.resolve(),updateSynchronizer=Promise.resolve(),cfFacade=function(e){var r=opfilter["new"](e);return{dimension:function(e){var n=r.then(function(r){return opfilter.dimension(r,e.toString())});return{dispose:function(){var e=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.dispose"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),e},groupAll:function(){var e=n.then(function(e){return opfilter["dimension.groupAll"](e)});return{value:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.value"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,r]),r},reduceSum:function(r){var n=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.reduceSum"](e[0],r.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},reduceCount:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.reduceCount"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),this},reduce:function(r,n,i){var t=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.reduce"](e[0],r.toString(),n.toString(),i.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,t]),this},dispose:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.dispose"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r}}},group:function(e){var r=n.then(function(r){return opfilter["dimension.group"](r,e?e.toString():function(e){return e}.toString())});return{top:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.top"](r[0],e)});return readSynchronizer=Promise.all([readSynchronizer,n]),n},all:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.all"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,e]),e},size:function(){return r.then(function(e){return opfilter["dimension.group.size"](e)})},reduceSum:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.reduceSum"](r[0],e.toString())}),i=Promise.race([n.then(function(e){return e}),n["catch"](function(e){return!1})]);return updateSynchronizer=Promise.all([updateSynchronizer,i]),this},reduceCount:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.reduceCount"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),this},reduce:function(e,n,i){var t=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.reduce"](r[0],e.toString(),n.toString(),i.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,t]),this},order:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.order"](r[0],e.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},orderNatural:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.orderNatural"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),this},dispose:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.dispose"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),e}}},filterRange:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filterRange"](r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},filterExact:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filterExact"](r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},filterFunction:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filterFunction"](r[0],e.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},filterAll:function(){var e=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.filterAll"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),e},filter:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filter"](r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},top:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.top"](r[0],e)});return readSynchronizer=Promise.all([readSynchronizer,r]),r},bottom:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.bottom"](r[0],e)});return readSynchronizer=Promise.all([readSynchronizer,r]),r}}},groupAll:function(){var e=r.then(function(e){return opfilter.groupAll(e)});return{value:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["groupAll.value"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,r]),r},reduceSum:function(r){var n=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){opfilter["groupAll.reduceSum"](e[0],r.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},reduceCount:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){opfilter["groupAll.reduceCount"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),this},reduce:function(r,n,i){var t=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){opfilter["groupAll.reduce"](e[0],r.toString(),n.toString(),i.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,t]),this},dispose:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["groupAll.dispose"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r}}},remove:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter.remove(e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),this},add:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter.add(r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},size:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter.size(e[0])});return readSynchronizer=Promise.all([readSynchronizer,e]),e},all:function(){return r.then(function(e){return opfilter.all(e)})}}};module.exports=cfFacade}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});